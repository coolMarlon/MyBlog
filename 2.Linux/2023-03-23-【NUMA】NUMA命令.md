# 2023-03-23-【NUMA】NUMA命令

**numastat -c qemu-kvm**

![image-20230323233743835](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230323233743835.png)

**echo 0 > /prpc/sys/kernel/numa_balancing**

关闭自动NUMA平衡策略

![image-20230323233816203](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230323233816203.png)



**跨NUMA节点的内存合并**

/sys/kernel/mm/ksm/merge_across_nodes





**virsh 查看CPU信息**

```bash
virsh vcpuinfo <instance_id>
```



**查看 虚拟机可以使用的物理逻辑CPU**

```bash
virsh # emlatorpin <instance_id>	
```



**让虚拟集只能在部分物理CPU之间调度**

```bash
virsh emulatorpin <vm_no> 26-31 --lice
```



**强制VCPU和物理机CPU一对一绑定**

```bash
virsh vcpupin <vm_no> 0 28
```

![image-20230323234750666](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20230323234750666.png)